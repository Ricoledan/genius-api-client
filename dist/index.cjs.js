"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("axios")),s=e(require("fs")),n=e(require("path"));function a(e){console.log("[dotenv][DEBUG] "+e)}const r=/^\s*([\w.-]+)\s*=\s*(.*)?\s*$/,o=/\\n/g,i=/\n|\r|\r\n/;(function(e){let t=n.resolve(process.cwd(),".env"),l="utf8",p=!1;e&&(null!=e.path&&(t=e.path),null!=e.encoding&&(l=e.encoding),null!=e.debug&&(p=!0));try{const e=function(e,t){const s=!(!t||!t.debug),n={};return e.toString().split(i).forEach((function(e,t){const i=e.match(r);if(null!=i){const e=i[1];let t=i[2]||"";const s=t.length-1,a='"'===t[0]&&'"'===t[s];"'"===t[0]&&"'"===t[s]||a?(t=t.substring(1,s),a&&(t=t.replace(o,"\n"))):t=t.trim(),n[e]=t}else s&&a(`did not match key and value when parsing line ${t+1}: ${e}`)})),n}(s.readFileSync(t,{encoding:l}),{debug:p});Object.keys(e).forEach((function(t){Object.prototype.hasOwnProperty.call(process.env,t)?p&&a(`"${t}" is already defined in \`process.env\` and will not be overwritten`):process.env[t]=e[t]}))}catch(e){return{error:e}}})();const l=t.create({method:"GET",baseURL:"https://api.genius.com/",headers:{Authorization:"Bearer "+process.env.ACCESS_TOKEN,"content-type":"application/json",useQueryString:!0},data:{code:"",client_id:process.env.CLIENT_ID,client_secret:process.env.CLIENT_SECRET,response_type:"code",grant_type:"authorization_code"}});function p(e){let t;const s=[];for(t=0;t<e.length;t++)s.push({song_id:e[t].result.id,full_song_title:e[t].result.title_with_featured,song_title:e[t].result.title,song_art_image_thumbnail:e[t].result.song_art_image_thumbnail_url,song_art_image_url:e[t].result.song_art_image_url});return s}exports.getArtistDetails=e=>{l({url:"/artists/"+e,params:{text_format:"plain"}}).then(e=>({bio:e.data.response.artist.description.plain,alias:e.data.response.artist.alternate_names,social_media:{facebook:e.data.response.artist.facebook_name,instagram:e.data.response.artist.instagram_name,twitter:e.data.response.artist.twitter_name}})).catch(e=>{e.response})},exports.getArtistIdDetails=e=>l({url:"search",params:{q:""+e,text_format:"plain"}}).then(e=>({id:e.data.response.hits[0].result.primary_artist.id+"",songs:p(e.data.response.hits)})).catch(e=>{e.response}),exports.getSongDetails=e=>{l({url:"/songs/"+e,params:{text_format:"plain"}}).then(e=>({title:e.data.response.song.full_title,apple_id:e.data.response.song.apple_music_id,apple_player:e.data.response.song.apple_music_player_url,description:e.data.response.song.description.plain,album:e.data.response.song.album.name})).catch(e=>{e.response})};
